{"version":3,"file":"src_app_pages_scanner_scanner_module_ts-es2015.js","mappings":"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","sources":["./src/app/pages/scanner/scanner-routing.module.ts","./src/app/pages/scanner/scanner.module.ts","./src/app/pages/scanner/scanner.page.ts","./src/app/pages/scanner/scanner.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ScannerPage } from './scanner.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ScannerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ScannerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ScannerPageRoutingModule } from './scanner-routing.module';\n\nimport { ScannerPage } from './scanner.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ScannerPageRoutingModule\n  ],\n  declarations: [ScannerPage]\n})\nexport class ScannerPageModule {}\n","import { AfterViewInit, Component, OnDestroy } from \"@angular/core\";\nimport { AngularFirestore } from \"@angular/fire/firestore\";\nimport { BarcodeScanner } from \"@capacitor-community/barcode-scanner\";\nimport {\n  AlertController,\n  ModalController,\n  PickerController,\n  PickerOptions,\n} from \"@ionic/angular\";\nimport { Subscription } from \"rxjs\";\nimport {\n  Book,\n  Bookshelf,\n  FirestoreService,\n} from \"../../services/firestore.service\";\nimport { User } from \"../../shared/auth\";\nimport { AddBookModalComponent } from \"../bookshelf/add-book-modal/add-book-modal.component\";\nimport { Toast } from \"@capacitor/toast\";\n\n@Component({\n  selector: \"app-scanner\",\n  templateUrl: \"./scanner.page.html\",\n  styleUrls: [\"./scanner.page.scss\"],\n})\nexport class ScannerPage implements AfterViewInit, OnDestroy {\n  public booksShelves: Bookshelf[];\n  public selectBookShelfTitle = \"Select bookshelf\";\n  result = null;\n  resultHasContent = false;\n  scanActive = false;\n  title = null;\n  authors = null;\n  publishers = null;\n  publish_date = null;\n  number_of_pages = null;\n  cover = null;\n  isbn = null;\n  bookShelfId: string = null;\n\n  currentBook: Book = {\n    title: this.title,\n    authors: this.authors,\n    publishers: this.publishers,\n    publish_date: this.publish_date,\n    number_of_pages: this.number_of_pages,\n    cover: this.cover,\n    isbn: this.isbn,\n    bookShelfId: this.bookShelfId,\n    createdAt: new Date(),\n  };\n\n  public subscriptions: Subscription = new Subscription();\n\n  constructor(\n    private alertController: AlertController,\n    private angularFirestore: AngularFirestore,\n    private afs: FirestoreService,\n    private pickerController: PickerController,\n    private modalController: ModalController\n  ) {}\n\n  ngAfterViewInit() {\n    BarcodeScanner.prepare();\n  }\n\n  ngOnDestroy() {\n    BarcodeScanner.stopScan();\n    this.subscriptions.unsubscribe();\n  }\n\n  ionViewWillEnter() {\n    this.result = null;\n    this.resultHasContent = false;\n\n    this.title = null;\n    this.authors = null;\n    this.publishers = null;\n    this.publish_date = null;\n    this.number_of_pages = null;\n    this.cover = null;\n    this.isbn = null;\n\n    const user = JSON.parse(localStorage.getItem(\"user\")) as User;\n\n    if (user) {\n      const sub = this.angularFirestore\n        .collection(\"bookshelfs\")\n        .snapshotChanges()\n        .subscribe((bookshelfs) => {\n          this.booksShelves = bookshelfs\n            .map((t) => ({\n              id: t.payload.doc.id,\n              ...(t.payload.doc.data() as Bookshelf),\n            }))\n            .map(\n              (bookshelf) =>\n                ({\n                  id: bookshelf.id,\n                  userId: bookshelf.userId,\n                  name: bookshelf.name,\n                } as Bookshelf)\n            )\n            .filter((t) => t.userId === user.uid);\n        });\n      this.subscriptions.add(sub);\n    }\n  }\n\n  async showPicker() {\n    const options: PickerOptions = {\n      buttons: [\n        {\n          text: \"Cancel\",\n          role: \"cancel\",\n        },\n        {\n          text: \"Ok\",\n          handler: (value: any) => {\n            this.selectBookShelfTitle = value.Bookshelfs.text;\n            this.bookShelfId = value.Bookshelfs.value;\n          },\n        },\n      ],\n      columns: [\n        {\n          name: \"Bookshelfs\",\n          options: this.getColumnOptions(),\n        },\n      ],\n    };\n\n    const picker = await this.pickerController.create(options);\n    picker.present();\n  }\n\n  async presentModal() {\n    const modal = await this.modalController.create({\n      component: AddBookModalComponent,\n      cssClass: \"modalCss\",\n      componentProps: {\n        bookShelfId: this.bookShelfId,\n      },\n    });\n    return await modal.present();\n  }\n\n  getColumnOptions() {\n    const options = [];\n    this.booksShelves.forEach((x) => {\n      options.push({ text: x.name, value: x.id });\n    });\n    return options;\n  }\n\n  async selectBookShelf() {\n    await this.showPicker();\n  }\n\n  async startScanner() {\n    this.title = null;\n    this.authors = null;\n    this.publishers = null;\n    this.publish_date = null;\n    this.number_of_pages = null;\n    this.cover = null;\n    this.isbn = null;\n\n    const allowed = await this.checkPermission();\n    if (allowed) {\n      this.scanActive = true;\n      document.body.classList.add(\"qrscanner\"); // add the qrscanner class to body\n      BarcodeScanner.hideBackground();\n      const result = await BarcodeScanner.startScan();\n      document.body.classList.remove(\"qrscanner\"); // remove the qrscanner from the body\n\n      if (result.hasContent) {\n        this.result = result.content;\n        this.resultHasContent = true;\n        this.scanActive = false;\n        this.isbn = this.result;\n        const response = await fetch(\n          \"https://openlibrary.org/api/books?bibkeys=ISBN:\" +\n            this.result +\n            \"&jscmd=data&format=json\"\n        );\n        const data = await response.json();\n        //Title of the book\n        this.title = data[\"ISBN:\" + this.result].title;\n        //Authors, implementation for multiple\n        this.authors = data[\"ISBN:\" + this.result].authors[0].name;\n        for (\n          let index = 1;\n          index < data[\"ISBN:\" + this.result].authors.length;\n          index++\n        ) {\n          this.authors =\n            this.authors +\n            \" \" +\n            data[\"ISBN:\" + this.result].authors[index].name +\n            \" \";\n        }\n\n        //Publisher\n        this.publishers = data[\"ISBN:\" + this.result].publishers[0].name;\n\n        //Publish date\n        this.publish_date = data[\"ISBN:\" + this.result].publish_date;\n\n        //Number of pages\n        if (data[\"ISBN:\" + this.result].number_of_pages !== undefined) {\n          this.number_of_pages = data[\"ISBN:\" + this.result].number_of_pages;\n        } else {\n          this.number_of_pages = \"\";\n        }\n        //Book cover\n        if (data[\"ISBN:\" + this.result].hasOwnProperty(\"cover\")) {\n          this.cover = data[\"ISBN:\" + this.result].cover.medium;\n        } else {\n          this.cover = \"./assets/icon/bookCoverError.svg\";\n        }\n\n        this.currentBook.authors = this.authors;\n        this.currentBook.cover = this.cover;\n        this.currentBook.isbn = this.isbn;\n        this.currentBook.number_of_pages = this.number_of_pages;\n        this.currentBook.publish_date = this.publish_date;\n        this.currentBook.publishers = this.publishers;\n        this.currentBook.title = this.title;\n        this.currentBook.bookShelfId = this.bookShelfId;\n        this.currentBook.createdAt = new Date();\n      }\n    }\n  }\n\n  async checkPermission() {\n    return new Promise(async (resolve, reject) => {\n      const status = await BarcodeScanner.checkPermission({ force: true });\n      if (status.granted) {\n        resolve(true);\n      } else if (status.denied) {\n        const alert = await this.alertController.create({\n          header: \"No permission\",\n          message: \"Please allow camera access in your settings\",\n          buttons: [\n            {\n              text: \"No\",\n              role: \"cancel\",\n            },\n            {\n              text: \"Open Settings\",\n              handler: () => {\n                resolve(false);\n                BarcodeScanner.openAppSettings();\n              },\n            },\n          ],\n        });\n\n        await alert.present();\n      } else {\n        resolve(false);\n      }\n    });\n  }\n\n  stopScanner() {\n    document.body.classList.remove(\"qrscanner\"); // remove the qrscanner from the body\n    BarcodeScanner.stopScan();\n    this.scanActive = false;\n  }\n\n  public async addBook(): Promise<void> {\n    await this.afs.addBook(this.currentBook);\n    Toast.show({\n      text: \"Book was successfully added to your bookshelf!\",\n    });\n  }\n}\n","export default \"<ion-header [hidden]=\\\"scanActive\\\" class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-icon\\n      src=\\\"./assets/icon/bookLogo.svg\\\"\\n      class=\\\"logo-large\\\"\\n      slot=\\\"end\\\"\\n    ></ion-icon>\\n    <ion-title class=\\\"title-text\\\">ISBN Scanner</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content\\n  [style.--background]=\\\"scanActive ? 'rgba(255,255,255,0.3)' : '#121212'\\\"\\n>\\n  <ion-row class=\\\"scanner-buttons ion-align-items-center\\\" [hidden]=\\\"scanActive\\\">\\n    <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n      <ion-button\\n        (click)=\\\"selectBookShelf()\\\"\\n        expand=\\\"block\\\"\\n        shape=\\\"round\\\"\\n        style=\\\"\\n          --background: rgba(var(--ion-color-success-rgb), 0.7);\\n          margin-bottom: 10px;\\n        \\\"\\n      >\\n        <span class=\\\"button-text\\\">{{selectBookShelfTitle}}</span>\\n      </ion-button>\\n      <ion-button\\n        (click)=\\\"presentModal()\\\"\\n        expand=\\\"block\\\"\\n        shape=\\\"round\\\"\\n        [disabled]=\\\"bookShelfId === null\\\"\\n        style=\\\"\\n          --background: rgba(var(--ion-color-success-rgb), 0.7);\\n          margin-bottom: 10px;\\n        \\\"\\n      >\\n        <span class=\\\"button-text\\\">Enter manually</span>\\n      </ion-button>\\n      <ion-button\\n        (click)=\\\"startScanner()\\\"\\n        expand=\\\"block\\\"\\n        shape=\\\"round\\\"\\n        [disabled]=\\\"bookShelfId === null\\\"\\n        [hidden]=\\\"scanActive\\\"\\n        style=\\\"\\n          --background: rgba(var(--ion-color-success-rgb), 0.7);\\n          margin-bottom: 10px;\\n        \\\"\\n      >\\n        <span class=\\\"button-text\\\">Start scanning</span>\\n      </ion-button>\\n    </ion-col>\\n  </ion-row>\\n  <div\\n    class=\\\"div-center\\\"\\n    *ngIf=\\\"resultHasContent && !scanActive else firstOpen\\\"\\n  >\\n    <ion-card class=\\\"card-style\\\">\\n      <ion-card-header>\\n        <ion-card-title class=\\\"ion-text-center\\\">{{ title }}</ion-card-title>\\n      </ion-card-header>\\n      <div class=\\\"div-center\\\">\\n        <ion-card-content class=\\\"ion-align-self-center\\\" style=\\\"width: 350px\\\">\\n          <ion-img src=\\\"{{ cover }}\\\"></ion-img>\\n          <div>\\n            <ion-list lines=\\\"none\\\">\\n              <ion-item>\\n                <ion-label class=\\\"ion-text-wrap\\\">\\n                  Authors:\\n                  <span> {{ authors }} </span>\\n                </ion-label>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label class=\\\"ion-text-wrap\\\"\\n                  >Publisher: <span> {{ publishers }} </span></ion-label\\n                >\\n              </ion-item>\\n              <ion-item>\\n                <ion-label class=\\\"ion-text-wrap\\\"\\n                  >Publish date: <span> {{ publish_date }} </span></ion-label\\n                >\\n              </ion-item>\\n              <ion-item>\\n                <ion-label class=\\\"ion-text-wrap\\\"\\n                  >Number of pages:\\n                  <span> {{ number_of_pages }} </span></ion-label\\n                >\\n              </ion-item>\\n              <ion-item>\\n                <ion-label class=\\\"ion-text-wrap\\\"\\n                  >ISBN: <span> {{ isbn }} </span></ion-label\\n                >\\n              </ion-item>\\n            </ion-list>\\n          </div>\\n          <ion-button (click)=\\\"addBook()\\\" expand=\\\"block\\\" shape=\\\"round\\\">\\n            <span class=\\\"button-text\\\">Add book to bookshelf </span>\\n          </ion-button>\\n        </ion-card-content>\\n      </div>\\n    </ion-card>\\n  </div>\\n\\n  <ng-template #firstOpen>\\n    <div class=\\\"div-center\\\" [hidden]=\\\"scanActive\\\">\\n      <ion-grid fixed style=\\\"margin-bottom: 30px\\\">\\n        <ion-row>\\n          <ion-col size=\\\"12\\\">\\n            <ion-icon\\n              src=\\\"./assets/icon/bookCard.svg\\\"\\n              class=\\\"card-icon\\\"\\n            ></ion-icon>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\" class=\\\"firstTitle\\\"\\n            >Scanning a book is easy!\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"12\\\" class=\\\"firstSubtitle\\\"\\n            >Select a bookshelf and make sure to allign your book barcode with\\n            the highlight box. Try to keep it steady!\\n            <ion-icon\\n              src=\\\"./assets/icon/bookCard.svg\\\"\\n              class=\\\"logo-large\\\"\\n              slot=\\\"end\\\"\\n            ></ion-icon>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </div>\\n  </ng-template>\\n</ion-content>\\n<ion-row class=\\\"scanner-buttons ion-align-items-center\\\" [hidden]=\\\"!scanActive\\\">\\n  <ion-col size=\\\"12\\\" class=\\\"ion-no-padding ion-text-center\\\">\\n    <ion-button\\n      (click)=\\\"stopScanner()\\\"\\n      expand=\\\"block\\\"\\n      shape=\\\"round\\\"\\n      style=\\\"--background: rgba(var(--ion-color-danger-rgb), 0.7)\\\"\\n    >\\n      <span class=\\\"button-text\\\">Stop scanning</span>\\n    </ion-button>\\n  </ion-col>\\n</ion-row>\\n<div class=\\\"scanner-ui\\\" [hidden]=\\\"!scanActive\\\"></div>\\n\";"],"names":[],"sourceRoot":"webpack:///"}