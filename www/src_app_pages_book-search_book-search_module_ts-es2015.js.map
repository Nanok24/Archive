{"version":3,"file":"src_app_pages_book-search_book-search_module_ts-es2015.js","mappings":"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","sources":["./src/app/pages/book-search/book-search-routing.module.ts","./src/app/pages/book-search/book-search.module.ts","./src/app/pages/book-search/book-search.page.ts","./src/app/services/firestore.service.ts","./src/app/pages/book-search/book-search.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BookSearchPage } from './book-search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BookSearchPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BookSearchPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BookSearchPageRoutingModule } from './book-search-routing.module';\n\nimport { BookSearchPage } from './book-search.page';\nimport { FilterPipe } from '../../pipes/filter.pipe';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    BookSearchPageRoutingModule\n  ],\n  declarations: [BookSearchPage, FilterPipe]\n})\nexport class BookSearchPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { AngularFireAuth } from \"@angular/fire/auth\";\nimport { AngularFirestore } from \"@angular/fire/firestore\";\nimport { mergeMap } from \"rxjs/operators\";\nimport {\n  Book,\n  Bookshelf,\n  FirestoreService,\n} from \"../../services/firestore.service\";\nimport { User } from \"../../shared/auth\";\n\n@Component({\n  selector: \"app-book-search\",\n  templateUrl: \"./book-search.page.html\",\n  styleUrls: [\"./book-search.page.scss\"],\n})\nexport class BookSearchPage implements OnInit {\n  public booksShelves: Bookshelf[];\n  public books: Book[];\n  public searchTerm: string;\n\n  constructor(\n    public afs: FirestoreService,\n    public afAuth: AngularFireAuth,\n    private angularFirestore: AngularFirestore\n  ) {}\n\n  public ngOnInit(): void {}\n\n  ionViewWillEnter() {\n    const user = JSON.parse(localStorage.getItem(\"user\")) as User;\n\n    if (user) {\n      this.angularFirestore\n        .collection(\"bookshelfs\")\n        .snapshotChanges()\n        .pipe(\n          mergeMap((booksShelves) => {\n            this.booksShelves = booksShelves\n              .map((t) => ({\n                id: t.payload.doc.id,\n                ...(t.payload.doc.data() as Bookshelf),\n              }))\n              .filter((t) => t.userId === user.uid);\n\n            return this.angularFirestore.collection(\"books\").snapshotChanges();\n          })\n        )\n        .subscribe((books) => {\n          const unfilteredBooks = books.map((t) => ({\n            id: t.payload.doc.id,\n            ...(t.payload.doc.data() as Book),\n          }));\n          this.books = unfilteredBooks.filter((t) =>\n            this.booksShelves.map((x) => x.id).includes(t.bookShelfId)\n          );\n        });\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument,\n  AngularFirestoreCollection,\n} from '@angular/fire/firestore';\nimport firebase from 'firebase/app';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport interface Users {\n  uid: string;\n  displayName: string;\n}\n\nexport interface Bookshelf {\n  id: string;\n  userId: string;\n  name: string;\n}\n\nexport interface Book {\n  id?: string;\n  authors?: string;\n  cover?: string;\n  isbn?: string;\n  number_of_pages?: string;\n  publish_date?: string;\n  publishers?: string;\n  title?: string;\n  bookShelfId: string;\n  createdAt: Date;\n}\n\nexport interface Stars {\n  booksID: string;\n  userID: string;\n  text: string;\n  rating: number;\n  createdAt: firebase.firestore.FieldValue;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FirestoreService {\n  currentUser: Users = null;\n  currentReview: Stars = null;\n  usersCollection: AngularFirestoreCollection<Users>;\n  users: Observable<Users[]>;\n\n  constructor(\n    public afAuth: AngularFireAuth,\n    public afStore: AngularFirestore\n  ) {\n    this.afAuth.onAuthStateChanged((user) => {\n      this.currentUser = user;\n    });\n  }\n\n  // getBooks() {\n  //   this.afStore\n  //     .collection('books')\n  //     .get()\n  //     .forEach((el) => {\n  //       console.log(el);\n  //     });\n  // }\n\n  // Asta functioneaza, daca tu ai alta modalitate, poti sa o modifici schimbi\n  addBook(book: Book) {\n    return this.afStore.collection('books').add({\n      authors: book.authors,\n      cover: book.cover,\n      isbn: book.isbn,\n      number_of_pages: book.number_of_pages,\n      publish_date: book.publish_date,\n      publishers: book.publishers,\n      title: book.title,\n      bookShelfId: book.bookShelfId,\n      createdAt: book.createdAt\n    });\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title class=\\\"title-text\\\">Search library</ion-title>\\n  </ion-toolbar>\\n  <ion-grid fixed>\\n    <ion-row>\\n      <ion-col\\n        size=\\\"12\\\"\\n        class=\\\"ion-align-items-center ion-justify-content-center\\\"\\n      >\\n        <ion-searchbar\\n          showCancelButton=\\\"never\\\"\\n          placeholder=\\\"Filter by Book Title\\\"\\n          [(ngModel)]=\\\"searchTerm\\\"\\n          animated\\n        ></ion-searchbar>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-header>\\n<ion-content>\\n  <ion-grid class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <!-- tot ce e in ion-col e template-ul pentru afisarea cartilor -->\\n      <ion-col\\n        size=\\\"12\\\"\\n        size-md=\\\"6\\\"\\n        size-lg=\\\"4\\\"\\n        style=\\\"width: 390px\\\"\\n        *ngFor=\\\"let book of books| filter:searchTerm\\\"\\n      >\\n        <ion-card>\\n          <ion-card-header>\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label class=\\\"card-title ion-text-wrap\\\"\\n                >{{book.title}}</ion-label\\n              >\\n            </ion-item>\\n          </ion-card-header>\\n          <ion-card-content\\n            class=\\\"\\n              ion-text-center\\n              ion-justify-content-between\\n              ion-align-center-center\\n            \\\"\\n          >\\n            <div\\n              style=\\\"width: 100px; height: 250px\\\"\\n              class=\\\"ion-float-left ion-align-items-center\\\"\\n            >\\n              <ion-img\\n                class=\\\"ion-float-left ion-align-self-center\\\"\\n                src=\\\"{{book.cover}}\\\"\\n                style=\\\"width: 100px; height: 250px; margin-top: 10%\\\"\\n              ></ion-img>\\n            </div>\\n            <ion-list lines=\\\"none\\\">\\n              <ion-item>\\n                <ion-label>Authors: <span>{{book.authors}}</span></ion-label>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label\\n                  >Publisher: <span>{{book.publishers}}</span></ion-label\\n                >\\n              </ion-item>\\n              <ion-item>\\n                <ion-label\\n                  >Publish date: <span>{{book.publish_date}}</span></ion-label\\n                >\\n              </ion-item>\\n              <ion-item>\\n                <ion-label\\n                  >Number of pages:\\n                  <span>{{book.number_of_pages}}</span></ion-label\\n                >\\n              </ion-item>\\n              <ion-item>\\n                <ion-label>ISBN: <span>{{book.isbn}}</span></ion-label>\\n              </ion-item>\\n            </ion-list>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";"],"names":[],"sourceRoot":"webpack:///"}