{"version":3,"file":"default-src_app_pages_bookshelf_add-book-modal_add-book-modal_component_ts-src_app_services_f-9dafa4-es2015.js","mappings":"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","sources":["./src/app/pages/bookshelf/add-book-modal/add-book-modal.component.ts","./src/app/services/firestore.service.ts","./src/app/pages/bookshelf/add-book-modal/add-book-modal.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { AngularFirestore } from \"@angular/fire/firestore\";\nimport { ModalController, NavParams } from \"@ionic/angular\";\nimport { Toast } from \"@capacitor/toast\";\n\n@Component({\n  selector: \"app-add-book-modal\",\n  templateUrl: \"./add-book-modal.component.html\",\n  styleUrls: [\"./add-book-modal.component.scss\"],\n})\nexport class AddBookModalComponent implements OnInit {\n  public bookshelfId;\n  public title: string;\n  public authors: string;\n  public publishers: string;\n  public publishDate: Date;\n  public numberOfPages: number;\n  public isbn: string;\n  public cover: string;\n  public customPickerOptions: any;\n\n  constructor(\n    public navParams: NavParams,\n    public modalController: ModalController,\n    private angularFirestore: AngularFirestore\n  ) {\n    this.bookshelfId = this.navParams.get(\"bookShelfId\");\n  }\n\n  ngOnInit() {\n    this.customPickerOptions = {\n      buttons: [\n        {\n          text: \"Cancel\",\n          handler: () => {\n            console.log(\"Clicked Log. Do not Dismiss.\");\n            return false;\n          },\n        },\n        {\n          text: \"Save\",\n          handler: (data) => {\n            console.log(data);\n            this.changePublishDate(data);\n          },\n        },\n      ],\n    };\n  }\n\n  public changeTitle(title: any): void {\n    this.title = title.target.value;\n  }\n\n  public changeAuthors(authors: any): void {\n    this.authors = authors.target.value;\n  }\n\n  public changePublishers(publishers: any): void {\n    this.publishers = publishers.target.value;\n  }\n\n  public changePublishDate(publishDate: any): void {\n    this.publishDate = publishDate.target.value;\n  }\n\n  public changeNumberOfPages(numberOfPages: any): void {\n    this.numberOfPages = numberOfPages.target.value;\n  }\n\n  public changeIsbn(name: any): void {\n    this.isbn = name.target.value;\n  }\n\n  async closeModal() {\n    const close = \"Modal Removed\";\n    await this.modalController.dismiss(close);\n  }\n\n  save() {\n    this.angularFirestore\n      .collection(\"books\")\n      .add({\n        bookShelfId: this.bookshelfId,\n        title: this.title,\n        authors: this.authors,\n        publishers: this.publishers,\n        publish_date: this.publishDate,\n        number_of_pages: this.numberOfPages,\n        cover: \"./assets/icon/bookCard.svg\",\n        isbn: this.isbn,\n        createdAt: new Date(),\n      })\n      .then(async () => {\n        const close = \"Modal Removed\";\n        Toast.show({\n          text: \"Book was successfully added to your bookshelf!\",\n        });\n        await this.modalController.dismiss(close);\n      })\n      .catch((err) => console.log(err));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument,\n  AngularFirestoreCollection,\n} from '@angular/fire/firestore';\nimport firebase from 'firebase/app';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport interface Users {\n  uid: string;\n  displayName: string;\n}\n\nexport interface Bookshelf {\n  id: string;\n  userId: string;\n  name: string;\n}\n\nexport interface Book {\n  id?: string;\n  authors?: string;\n  cover?: string;\n  isbn?: string;\n  number_of_pages?: string;\n  publish_date?: string;\n  publishers?: string;\n  title?: string;\n  bookShelfId: string;\n  createdAt: Date;\n}\n\nexport interface Stars {\n  booksID: string;\n  userID: string;\n  text: string;\n  rating: number;\n  createdAt: firebase.firestore.FieldValue;\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class FirestoreService {\n  currentUser: Users = null;\n  currentReview: Stars = null;\n  usersCollection: AngularFirestoreCollection<Users>;\n  users: Observable<Users[]>;\n\n  constructor(\n    public afAuth: AngularFireAuth,\n    public afStore: AngularFirestore\n  ) {\n    this.afAuth.onAuthStateChanged((user) => {\n      this.currentUser = user;\n    });\n  }\n\n  // getBooks() {\n  //   this.afStore\n  //     .collection('books')\n  //     .get()\n  //     .forEach((el) => {\n  //       console.log(el);\n  //     });\n  // }\n\n  // Asta functioneaza, daca tu ai alta modalitate, poti sa o modifici schimbi\n  addBook(book: Book) {\n    return this.afStore.collection('books').add({\n      authors: book.authors,\n      cover: book.cover,\n      isbn: book.isbn,\n      number_of_pages: book.number_of_pages,\n      publish_date: book.publish_date,\n      publishers: book.publishers,\n      title: book.title,\n      bookShelfId: book.bookShelfId,\n      createdAt: book.createdAt\n    });\n  }\n}\n","export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-title class=\\\"ion-text-center\\\">Add a book</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"closeModal()\\\" class=\\\"button-text\\\">Close</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-list style=\\\"height: 100%; width: 100%\\\" lines=\\\"none\\\">\\n    <ion-item style=\\\"margin-bottom: 20px\\\">\\n      <ion-label class=\\\"ion-text-center book-title\\\"\\n        >Enter information</ion-label\\n      >\\n    </ion-item>\\n    <ion-item style=\\\"margin-bottom: 10px\\\">\\n      <ion-label class=\\\"label-text\\\">Title:</ion-label>\\n      <ion-input\\n        (ionChange)=\\\"changeTitle($event)\\\"\\n        class=\\\"review-text\\\"\\n      ></ion-input>\\n    </ion-item>\\n    <ion-item style=\\\"margin-bottom: 10px\\\">\\n      <ion-label class=\\\"label-text\\\">Authors:</ion-label>\\n      <ion-input\\n        (ionChange)=\\\"changeAuthors($event)\\\"\\n        class=\\\"review-text\\\"\\n      ></ion-input>\\n    </ion-item>\\n    <ion-item style=\\\"margin-bottom: 10px\\\">\\n      <ion-label class=\\\"label-text\\\">Publishers:</ion-label>\\n      <ion-input\\n        (ionChange)=\\\"changePublishers($event)\\\"\\n        class=\\\"review-text\\\"\\n      ></ion-input>\\n    </ion-item>\\n    <ion-item style=\\\"margin-bottom: 10px\\\">\\n      <ion-label class=\\\"label-text\\\">Publish date:</ion-label>\\n      <ion-input\\n        (ionChange)=\\\"changePublishDate($event)\\\"\\n        class=\\\"review-text\\\"\\n      ></ion-input>\\n    </ion-item>\\n    <ion-item style=\\\"margin-bottom: 10px\\\">\\n      <ion-label class=\\\"label-text\\\">Number of pages:</ion-label>\\n      <ion-input\\n        (ionChange)=\\\"changeNumberOfPages($event)\\\"\\n        class=\\\"review-text\\\"\\n      ></ion-input>\\n    </ion-item>\\n    <ion-item style=\\\"margin-bottom: 10px\\\">\\n      <ion-label class=\\\"label-text\\\">ISBN:</ion-label>\\n      <ion-input\\n        (ionChange)=\\\"changeIsbn($event)\\\"\\n        class=\\\"review-text\\\"\\n      ></ion-input>\\n    </ion-item>\\n  </ion-list>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar style=\\\"--background: rgba(var(--ion-color-success-rgb), 0.7)\\\">\\n    <ion-button expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\" (click)=\\\"save()\\\">\\n      <span class=\\\"button-text\\\">Save book</span>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\\n\";"],"names":[],"sourceRoot":"webpack:///"}