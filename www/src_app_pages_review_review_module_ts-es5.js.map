{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAEC;AAFb,OADqB,CAAvB;;UAWaC,wBAAuB;AAAA;AAAA;;AAAvBA,8BAAuB,uDAJnC,yDAAS;AACRC,eAAO,EAAE,CAACC,mEAAsBN,MAAtB,CAAD,CADD;AAERO,eAAO,EAAE,CAACD,yDAAD;AAFD,OAAT,CAImC,GAAvBF,wBAAuB,CAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGAI,iBAAgB;AAAA;AAAA;;AAAhBA,uBAAgB,uDAT5B,yDAAS;AACRH,eAAO,EAAE,CACPI,yDADO,EAEPC,uDAFO,EAGPC,uDAHO,EAIPC,2EAJO,CADD;AAORC,oBAAY,EAAE,CAACC,oDAAD;AAPN,OAAT,CAS4B,GAAhBN,iBAAgB,CAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCCAO,WAAU;AAKrB,4BAAoBC,gBAApB,EAAsD;AAAA;;AAAlC;AAJb,yBAAoB,EAApB;AAImD;;AALrC;AAAA;AAAA,iBAOrB,4BAAgB;AAAA;;AACd,gBAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb;;AACA,gBAAIJ,IAAJ,EAAU;AACR,mBAAKK,MAAL,GAAcL,IAAI,CAACM,GAAnB;AACA,mBAAKC,WAAL,GAAmBJ,YAAY,CAACC,OAAb,CAAqB,wBAArB,CAAnB;AAEA,mBAAKL,gBAAL,CACGS,UADH,CACc,OADd,EAEGC,eAFH,GAGGC,SAHH,CAGa,UAACC,OAAD,EAAY;AACrB,qBAAI,CAACA,OAAL,GAAeA,OAAO,CACnBC,GADY,CACR,UAACC,CAAD;AAAA,yBAAOC;AACVC,sBAAE,EAAEF,CAAC,CAACG,OAAF,CAAUC,GAAV,CAAcF;AADR,qBAENF,CAAC,CAACG,OAAF,CAAUC,GAAV,CAAcC,IAAd,EAFM,CAAP;AAAA,iBADQ,EAKZC,MALY,CAKL,UAACN,CAAD;AAAA,yBAAOA,CAAC,CAACR,MAAF,KAAa,KAAI,CAACA,MAAzB;AAAA,iBALK,CAAf;AAMD,eAVH;AAWD;AACF;AAzBoB;AAAA;AAAA,iBA2Bd,mBAAM;AAAA;;AACX,iBAAKN,gBAAL,CACGS,UADH,CACc,OADd,EAEGC,eAFH,GAGGC,SAHH,CAGa,UAACC,OAAD,EAAY;AACrB,oBAAI,CAACA,OAAL,GAAeA,OAAO,CAACC,GAAR,CAAY,UAACC,CAAD;AAAA,uBAAOC;AAChCC,oBAAE,EAAEF,CAAC,CAACG,OAAF,CAAUC,GAAV,CAAcF;AADc,mBAE5BF,CAAC,CAACG,OAAF,CAAUC,GAAV,CAAcC,IAAd,EAF4B,CAAP;AAAA,eAAZ,CAAf;AAID,aARH;AASD;AArCoB;AAAA;AAAA,iBAuCrB,sBAAaE,QAAb,EAA6B;AAC3B,mBAAO,KAAKrB,gBAAL,CAAsBkB,GAAtB,iBAAmCG,QAAnC,cAAP;AACD;AAzCoB;;AAAA;AAAA;;;;gBAnBdC;;;;AAmBIvB,iBAAU,uDALtB,0DAAU;AACTwB,gBAAQ,EAAE,YADD;AAETC,yJAFS;;AAAA,OAAV,CAKsB,GAAVzB,WAAU,CAAV;;;;;;;ACpBb;;;AAAA0B,uCAAe,46GAAf;;;;;;;;;","names":["routes","path","component","_review_page__WEBPACK_IMPORTED_MODULE_0__","ReviewPageRoutingModule","imports","_angular_router__WEBPACK_IMPORTED_MODULE_3__","exports","ReviewPageModule","_angular_common__WEBPACK_IMPORTED_MODULE_4__","_angular_forms__WEBPACK_IMPORTED_MODULE_5__","_ionic_angular__WEBPACK_IMPORTED_MODULE_6__","_review_routing_module__WEBPACK_IMPORTED_MODULE_0__","declarations","_review_page__WEBPACK_IMPORTED_MODULE_1__","ReviewPage","angularFirestore","user","JSON","parse","localStorage","getItem","userId","uid","displayName","collection","snapshotChanges","subscribe","reviews","map","t","Object","id","payload","doc","data","filter","reviewId","_angular_fire_firestore__WEBPACK_IMPORTED_MODULE_2__","selector","template","__webpack_exports__"],"sources":["webpack:///src/app/pages/review/review-routing.module.ts","webpack:///src/app/pages/review/review.module.ts","webpack:///src/app/pages/review/review.page.ts","webpack:///src/app/pages/review/review.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ReviewPage } from './review.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReviewPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ReviewPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReviewPageRoutingModule } from './review-routing.module';\n\nimport { ReviewPage } from './review.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReviewPageRoutingModule\n  ],\n  declarations: [ReviewPage]\n})\nexport class ReviewPageModule {}\n","import { Component } from \"@angular/core\";\nimport { AngularFirestore } from \"@angular/fire/firestore\";\nimport { User } from \"../../shared/auth\";\n\nexport interface Review {\n  id: string;\n  userId: string;\n  booksID: string;\n  rating: number;\n  bookAuthors: string;\n  text: string;\n  title: string;\n  cover: string;\n}\n\n@Component({\n  selector: \"app-review\",\n  templateUrl: \"./review.page.html\",\n  styleUrls: [\"./review.page.scss\"],\n})\nexport class ReviewPage {\n  public reviews: Review[] = [];\n  public userId: string;\n  public displayName: string;\n\n  constructor(private angularFirestore: AngularFirestore) {}\n\n  ionViewWillEnter() {\n    const user = JSON.parse(localStorage.getItem(\"user\")) as User;\n    if (user) {\n      this.userId = user.uid;\n      this.displayName = localStorage.getItem(\"currentUserDisplayName\");\n\n      this.angularFirestore\n        .collection(\"stars\")\n        .snapshotChanges()\n        .subscribe((reviews) => {\n          this.reviews = reviews\n            .map((t) => ({\n              id: t.payload.doc.id,\n              ...(t.payload.doc.data() as Review),\n            }))\n            .filter((t) => t.userId === this.userId);\n        });\n    }\n  }\n\n  public delete(): void {\n    this.angularFirestore\n      .collection(\"stars\")\n      .snapshotChanges()\n      .subscribe((reviews) => {\n        this.reviews = reviews.map((t) => ({\n          id: t.payload.doc.id,\n          ...(t.payload.doc.data() as Review),\n        }));\n      });\n  }\n\n  deleteReview(reviewId: string): Promise<void> {\n    return this.angularFirestore.doc(`stars/${reviewId}`).delete();\n  }\n}\n","export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-title class=\\\"title-text\\\">Books Review</ion-title>\\n    <ion-icon\\n      src=\\\"./assets/icon/bookLogo.svg\\\"\\n      class=\\\"logo-large\\\"\\n      slot=\\\"end\\\"\\n    ></ion-icon>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-grid class=\\\"ion-align-items-center ion-justify-content-center\\\">\\n    <ion-card *ngIf=\\\"!reviews.length\\\">\\n      <ion-card-content>\\n        <ion-item>\\n          <ion-label><span>Collection is empty</span></ion-label>\\n        </ion-item>\\n      </ion-card-content>\\n    </ion-card>\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\n      <!-- tot ce e in ion-col e template-ul pentru afisarea recenziilor -->\\n      <ion-col\\n        size=\\\"12\\\"\\n        size-md=\\\"6\\\"\\n        size-lg=\\\"4\\\"\\n        style=\\\"width: 390px\\\"\\n        *ngFor=\\\"let review of reviews\\\"\\n      >\\n        <ion-card>\\n          <ion-card-header>\\n            <div class=\\\"ion-float-right ion-no-padding\\\">\\n              <ion-button\\n                (click)=\\\"deleteReview(review.id)\\\"\\n                fill=\\\"clear\\\"\\n                slot=\\\"end\\\"\\n              >\\n                <ion-icon\\n                  slot=\\\"icon-only\\\"\\n                  name=\\\"trash-sharp\\\"\\n                  style=\\\"color: rgba(var(--ion-color-danger-rgb), 0.85)\\\"\\n                >\\n                </ion-icon>\\n              </ion-button>\\n            </div>\\n            <ion-item lines=\\\"none\\\">\\n              <ion-label class=\\\"card-title ion-text-wrap\\\"\\n                >{{review.title}}</ion-label\\n              >\\n            </ion-item>\\n            <ion-card-subtitle>{{review.bookAuthors}}</ion-card-subtitle>\\n          </ion-card-header>\\n          <ion-card-content\\n            class=\\\"\\n              ion-text-center ion-justify-content-between ion-align-items-center\\n            \\\"\\n          >\\n            <div\\n              style=\\\"width: 100px; height: 250px\\\"\\n              class=\\\"ion-float-left ion-align-items-center\\\"\\n            >\\n              <ion-img\\n                class=\\\"ion-align-items-center\\\"\\n                src=\\\"{{review.cover}}\\\"\\n                style=\\\"\\n                  width: 100px;\\n                  height: 250px;\\n                  margin-bottom: 20%;\\n                  display: inline-block;\\n                \\\"\\n              ></ion-img>\\n            </div>\\n            <ion-list lines=\\\"none\\\">\\n              <ion-item class=\\\"review-text\\\"> {{review.text}} </ion-item>\\n              <ion-item>\\n                <ion-label> Rating: {{ review.rating }} / 5</ion-label>\\n              </ion-item>\\n            </ion-list>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button>\\n      <ion-icon name=\\\"search-outline\\\"></ion-icon>\\n    </ion-fab-button>\\n    <ion-fab-list side=\\\"top\\\">\\n      <ion-fab-button class=\\\"search-list\\\" [routerLink]=\\\"['../../book-search']\\\">\\n        <ion-icon name=\\\"book\\\"></ion-icon>\\n      </ion-fab-button>\\n      <ion-fab-button\\n        class=\\\"search-list\\\"\\n        [routerLink]=\\\"['../../review-search']\\\"\\n      >\\n        <ion-icon name=\\\"star\\\"></ion-icon>\\n      </ion-fab-button>\\n      <ion-fab-button class=\\\"search-list\\\" [routerLink]=\\\"['../../user-search']\\\">\\n        <ion-icon name=\\\"person\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ion-fab-list>\\n  </ion-fab>\\n</ion-content>\\n\";"]}